push 알림때문에 고생을 했다. 하지만 방법을 찾았다.

고민했던 부분이 어떻게 하면 앱을 시작할 때 푸시 허락을 물어보고 어떻게 하면 앱이 꺼져있는 상태에서도 푸시알림이 갈까 였는데, 클라이언트 코드에 푸시알림이 들어가면 당연히 앱이 꺼졌을때는 받을 수 없다. 따라서 서버 코드에 엑스포 푸시알림 호스트 서버에 기기의 푸시 토큰을 기억해서 post request를 날리면 된다. 

또 처음에 허락을 물어보는 것은 푸시 토큰을 등록만 하고 날리진 않게 하여 등록하는 부분을 앱을 키자마자 실행하고 이와 같은 부분이 앱이 처음 실행될때 기본적으로 allow don't allow를 물어보기 때문에 체크할 수 있다.



오늘은 기간별로 도전기록을 남기는 것을 막는 로직을 구현했고, 한번이라도 기록이 실패로 체크되면 대쉬보드에 들어갔을때 실패, 원샷인데 기록이 성공으로 남아있으면 성공이 나오게 구현했다.